components:
  schemas:
    ConsultarCepResponse:
      description: |
        Resposta da consulta de CEP.
        - Quando encontrado: retorna os campos de Endereco
        - Quando inexistente: retorna {"erro": true}
      oneOf:
        - $ref: "#/components/schemas/Endereco"
        - $ref: "#/components/schemas/ErroCepInexistente"

    Endereco:
      type: object
      additionalProperties: false
      properties:
        cep:
          type: string
          description: CEP formatado (com hífen).
          example: "01001-000"
        logradouro:
          type: string
          example: "Praça da Sé"
        complemento:
          type: string
          example: "lado ímpar"
        unidade:
          type: string
          description: Campo pode vir vazio.
          example: ""
        bairro:
          type: string
          example: "Sé"
        localidade:
          type: string
          description: Cidade
          example: "São Paulo"
        uf:
          type: string
          description: Sigla da UF
          example: "SP"
        estado:
          type: string
          description: Nome do estado
          example: "São Paulo"
        regiao:
          type: string
          description: Região do Brasil
          example: "Sudeste"
        ibge:
          type: string
          description: Código IBGE do município
          example: "3550308"
        gia:
          type: string
          description: Código GIA (pode vir vazio fora de SP)
          example: "1004"
        ddd:
          type: string
          description: DDD
          example: "11"
        siafi:
          type: string
          description: Código SIAFI
          example: "7107"
        erro:
          type: boolean
          description: "True se o CEP não foi encontrado (válido mas inexistente na base)."
          example: true
      required: []
      # Nota: Nenhum campo é obrigatório pois pode vir apenas {"erro": true}

    ErroCepInexistente:
      type: object
      additionalProperties: false
      properties:
        erro:
          type: boolean
          description: Indica CEP válido, porém inexistente.
          enum: [true]
      required: [erro]

    ErroRequisicao:
      type: object
      additionalProperties: false
      properties:
        message:
          type: string
      required: [message]
